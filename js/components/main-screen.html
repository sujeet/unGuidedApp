<link rel="import" href="../vendors/core-scaffold/core-scaffold.html">
<link rel="import" href="../vendors/core-header-panel/core-header-panel.html">
<link rel="import" href="../vendors/core-toolbar/core-toolbar.html">

<link rel="import" href="../vendors/paper-shadow/paper-shadow.html">
<link rel="import" href="../vendors/paper-tabs/paper-tabs.html">

<link rel="import" href="../vendors/google-map/google-map.html">

<link rel="import" href="./tour-drawer.html">
<link rel="import" href="./location-editor.html">

<polymer-element name="main-screen" attributes="menuTitle mainTitle">

  <template>
    <link rel="stylesheet" href="main-screen.css" shim-shadowdom>

    <core-scaffold id="scaffold" selectedTab="{{selectedTab}}">
      <!-- Discover -->
      <template if="{{selectedTab == 0}}">
      </template>

      <!-- Take a tour -->
      <template if="{{selectedTab == 1}}">
      </template>

      <!-- Tour Creation -->
      <template if="{{selectedTab == 2}}">
        <core-header-panel navigation flex id="drawer">
          <tour-drawer id="tour-drawer" tour="{{tour}}"></tour-drawer>
        </core-header-panel>

        <div vertical layout tool>
          <paper-shadow z="1"></paper-shadow>
        </div>

        <div vertical layout>
          <div class="content">
            <location-editor
              id="locationEditor"
              location="{{tour.selectedLocation}}">
            </location-editor>
          </div>
        </div>
      </template>

    </core-scaffold>
  </template>

  <script>

   Polymer("main-screen", {
     selectedTab: 2,

     ready: function() {
       this.scaffold = this.$.scaffold;
       this.locationEditor = this.$.locationEditor;
       window.addEventListener('add-place', this.addPlace.bind(this));
     },

     addPlace: function() {
       this.scaffold.togglePanel();
     },

     tour: {
       name: "",
       locations: [],
       selectedLocationIdx: -1,
       selectedLocation: null,
     }
   });

  </script>

</polymer-element>
